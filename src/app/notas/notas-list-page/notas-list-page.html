<h2>📋 Mis Notas</h2>

<div *ngIf="notas.length === 0">
  <p>No tienes notas aún.</p>
</div>

<div class="notas-grid">
  <div class="nota-card" *ngFor="let nota of notas"
    style="display: flex; flex-direction: column; justify-content: space-between; height: 320px;">
    <div>
      <h3>{{ nota.titulo }}</h3>
      <ng-container [ngSwitch]="nota.tipo">
        <p *ngSwitchCase="'texto'">{{ nota.nota?.substring(0, 100) }}...</p>
        <ul *ngIf="nota.tipo === 'checklist'">
          <li *ngFor="let item of nota.items" [style.textDecoration]="item.completado ? 'line-through' : 'none'">
            {{ item.texto }}
          </li>
        </ul>
        <img *ngSwitchCase="'sketchpad'" [src]="nota.nota" alt="Sketchpad" style="max-width:100%;" />
        <audio *ngSwitchCase="'voz'" [src]="nota.audioUrl" controls></audio>
        <div *ngSwitchCase="'calendario'" style="font-size: 0.9rem; color: #a8a7a7;">
          📅 {{ nota.eventos?.length || 0 }} evento(s) en {{ nota.anio }}/{{ (nota.mes + 1).toString().padStart(2, '0')
          }}
        </div>
      </ng-container>
    </div>
    <div style="margin-top: auto;">
      <a *ngIf="nota.tipo === 'texto' || !nota.tipo" [routerLink]="['/notas', nota._id]">🖊 Ver / Editar</a>
      <a *ngIf="nota.tipo === 'checklist'" [routerLink]="['/notas', nota._id, 'checklist']">🖊 Ver / Editar</a>
      <a *ngIf="nota.tipo === 'sketchpad'" [routerLink]="['/notas', nota._id, 'sketchpad']">🖊 Ver / Editar</a>
      <a *ngIf="nota.tipo === 'voz'" [routerLink]="['/notas', nota._id, 'voz']">🎧 Escuchar</a>
      <a *ngIf="nota.tipo === 'calendario'" [routerLink]="['/notas', nota._id, 'calendario']">📅 Ver</a>
    </div>
  </div>
</div>